<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>System Settings</title>
</head>
<body>
<div id="sidebar-placeholder"></div>
<div class="content">
  <h1>System Settings</h1>
  <hr>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Appointment Pricing</h5>
      <form id="fee-form">
        <div class="mb-3">
          <label for="appointment-fee" class="form-label">Default Appointment Fee (Rs.)</label>
          <input type="number" id="appointment-fee" class="form-control" value="2500.00" step="0.01">
        </div>
        <button type="submit" class="btn btn-primary">Update Fee</button>
      </form>
    </div>
  </div>
</div>

<script src="../js/layout-loader.js"></script>
<script>
  document.getElementById('fee-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const token = localStorage.getItem('authToken');
    const newFee = document.getElementById('appointment-fee').value;

    fetch('http://localhost:8080/api/settings/appointment-fee', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + token
      },
      body: JSON.stringify({ fee: newFee })
    })
            .then(response => {
              if (response.ok) {
                alert('Appointment fee updated successfully!');
              } else {
                alert('Error updating fee.');
              }
            });
  });
</script>
</body>
</html>