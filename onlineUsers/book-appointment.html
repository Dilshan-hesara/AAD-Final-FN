<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <title>Book New Appointment</title>-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--  <link rel="stylesheet" href="../css/styles.css">-->
<!--  <script src="../js/auth.js" defer></script>-->
<!--</head>-->
<!--<body>-->
<!--<div id="user-navbar-placeholder"></div>-->

<!--<div class="container mt-5">-->
<!--  <h1>Book a New Appointment</h1>-->
<!--  <hr>-->
<!--  <div class="card">-->
<!--    <div class="card-body">-->
<!--      <form id="book-appointment-form">-->
<!--        <div class="mb-3">-->
<!--          <label for="branch-select" class="form-label">1. Select Branch</label>-->
<!--          <select id="branch-select" class="form-select" required>-->
<!--            <option value="">Loading branches...</option>-->
<!--          </select>-->
<!--        </div>-->
<!--        <div class="mb-3">-->
<!--          <label for="doctor-select" class="form-label">2. Select Doctor</label>-->
<!--          <select id="doctor-select" class="form-select" required disabled>-->
<!--            <option value="">Please select a branch first</option>-->
<!--          </select>-->
<!--        </div>-->
<!--        <div class="mb-3">-->
<!--          <label for="appointmentDate" class="form-label">3. Select Date & Time</label>-->
<!--          <input type="datetime-local" id="appointmentDate" class="form-control" required>-->
<!--        </div>-->
<!--        <div class="mb-3">-->
<!--          <label for="reason" class="form-label">Reason for Visit (Optional)</label>-->
<!--          <textarea id="reason" class="form-control" rows="3"></textarea>-->
<!--        </div>-->
<!--        <button type="submit" class="btn btn-success">Confirm Booking</button>-->
<!--      </form>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>-->

<!--<script>-->
<!--  $(document).ready(function() {-->
<!--    const token = localStorage.getItem('authToken');-->
<!--    loadBranches();-->
<!--    function loadBranches() {-->
<!--      $.ajax({-->
<!--        url: "http://localhost:8080/api/branches",-->
<!--        method: "GET",-->
<!--        headers: {-->
<!--          "Authorization": "Bearer " + localStorage.getItem("authToken") // << මෙක තමයි main point-->
<!--        },-->
<!--        success: function (data) {-->
<!--          console.log("Branches:", data);-->
<!--        },-->
<!--        error: function (xhr) {-->
<!--          console.error("Error loading branches:", xhr);-->
<!--        }-->
<!--      });-->
<!--    }-->


<!--    // Step 2: When a branch is selected, fetch the doctors-->
<!--    $('#branch-select').on('change', function() {-->
<!--      const branchId = $(this).val();-->
<!--      const doctorSelect = $('#doctor-select');-->

<!--      if (!branchId) {-->
<!--        doctorSelect.html('<option value="">Please select a branch first</option>').prop('disabled', true);-->
<!--        return;-->
<!--      }-->

<!--      doctorSelect.html('<option value="">Loading...</option>').prop('disabled', true);-->

<!--      $.ajax({-->
<!--        url: `http://localhost:8080/api/doctors/by-branch/${branchId}`,-->
<!--        type: 'GET',-->
<!--        headers: { 'Authorization': 'Bearer ' + token },-->
<!--        success: function(doctors) {-->
<!--          doctorSelect.empty().append('<option value="">&#45;&#45; Select a Doctor &#45;&#45;</option>');-->
<!--          doctors.forEach(d => {-->
<!--            doctorSelect.append(`<option value="${d.id}">${d.fullName} (${d.specialization})</option>`);-->
<!--          });-->
<!--          doctorSelect.prop('disabled', false);-->
<!--        },-->
<!--        error: function(err) {-->
<!--          console.error("Error loading doctors:", err);-->
<!--          doctorSelect.html('<option value="">Could not load doctors</option>');-->
<!--        }-->
<!--      });-->
<!--    });-->

<!--    // Step 3: Handle the final form submission-->
<!--    $('#book-appointment-form').on('submit', function(e) {-->
<!--      e.preventDefault();-->
<!--      const appointmentData = {-->
<!--        branchId: $('#branch-select').val(),-->
<!--        doctorId: $('#doctor-select').val(),-->
<!--        appointmentDate: $('#appointmentDate').val(),-->
<!--        reason: $('#reason').val()-->
<!--      };-->

<!--      $.ajax({-->
<!--        url: 'http://localhost:8080/api/user/book-appointment',-->
<!--        type: 'POST',-->
<!--        headers: {-->
<!--          'Content-Type': 'application/json',-->
<!--          'Authorization': 'Bearer ' + token-->
<!--        },-->
<!--        data: JSON.stringify(appointmentData),-->
<!--        success: function() {-->
<!--          alert('Appointment booked successfully!');-->
<!--          window.location.href = 'my-appointments.html';-->
<!--        },-->
<!--        error: function() {-->
<!--          alert('Error booking appointment.');-->
<!--        }-->
<!--      });-->
<!--    });-->
<!--  });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
