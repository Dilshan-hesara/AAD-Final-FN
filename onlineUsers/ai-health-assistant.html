<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>AI Health Assistant - HMS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        .chat-window {
            height: 60vh;
            overflow-y: auto;
            background-color: #f1f3f5;
        }
        .message-bubble {
            padding: 10px 15px;
            border-radius: 20px;
            margin-bottom: 10px;
            max-width: 80%;
            clear: both;
        }
        .ai-message {
            background-color: #e9ecef;
            float: left;
        }
        .user-message {
            background-color: #0d6efd;
            color: white;
            float: right;
        }
    </style>
</head>
<body style="background-color: #f8f9fa;">

<!--<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand fw-bold" th:href="@{/}"><i class="bi bi-hospital"></i> HMS</a>-->
<!--        <div class="collapse navbar-collapse">-->
<!--            <ul class="navbar-nav ms-auto">-->
<!--                <li class="nav-item"><a class="nav-link" th:href="@{/my-appointments}">My Appointments</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" th:href="@{/profile}">My Profile</a></li>-->
<!--                <li class="nav-item"><a class="nav-link active" th:href="@{/ai-assistant}">AI Assistant</a></li>-->
<!--                <li class="nav-item"><a class="btn btn-outline-danger" th:href="@{/logout}">Logout</a></li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-9">
            <div class="card shadow-sm">
                <div class="card-header text-white bg-primary">
                    <i class="bi bi-robot"></i> AI Health Assistant
                </div>
                <div class="card-body chat-window p-4" id="chat-window">
                    <div class="message-bubble ai-message">
                        Hello! I am your AI Health Assistant. Please describe your symptoms.
                        <br><small class="d-block mt-2"><b>Disclaimer:</b> I am an AI bot and not a substitute for a real medical professional. Please consult a doctor for a proper diagnosis.</small>
                    </div>

                    <div class="message-bubble user-message">
                        I have a severe headache and a slight fever since yesterday.
                    </div>
                    <div class="message-bubble ai-message">
                        I understand. A headache with a fever could be due to several reasons. Have you experienced any other symptoms like a runny nose, cough, or body aches?
                    </div>

                </div>
                <div class="card-footer">
                    <form id="message-form" class="d-flex">
                        <input type="text" class="form-control" placeholder="Type your symptoms here..." id="user-input" required>
                        <button type="submit" class="btn btn-primary ms-2"><i class="bi bi-send-fill"></i> Send</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../js/user-layout-loader.js"></script>

<script>
    // This is a simple script to simulate the chat. A real implementation would use AJAX/Fetch to talk to the backend.
    const form = document.getElementById('message-form');
    const input = document.getElementById('user-input');
    const chatWindow = document.getElementById('chat-window');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value.trim() === '') return;

        // Display user message
        const userBubble = document.createElement('div');
        userBubble.className = 'message-bubble user-message';
        userBubble.textContent = input.value;
        chatWindow.appendChild(userBubble);

        input.value = '';
        chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to bottom
    });
</script>

</body>
</html>