

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Receptionists</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="../css/styles.css">
  <script src="../js/auth.js" defer></script>
</head>
<body>
<div id="sidebar-placeholder"></div>

<div class="content">
  <div class="d-flex justify-content-between align-items-center">
    <h1>Manage Receptionists</h1>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addReceptionistModal">
      <i class="bi bi-person-plus-fill"></i> Add New Receptionist
    </button>
  </div>
  <hr>

  <table class="table table-hover">
    <thead class="table-light">
    <tr>
      <th>Name</th>
      <th>Username</th>
      <th>Role</th>
    </tr>
    </thead>
    <tbody id="receptionist-table-body">
    </tbody>
  </table>
</div>

<div class="modal fade" id="addReceptionistModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add New Receptionist</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="add-receptionist-form">
          <div class="mb-3"><label class="form-label">Full Name</label><input type="text" id="fullName" class="form-control" required></div>
          <div class="mb-3"><label class="form-label">Username</label><input type="text" id="username" class="form-control" required></div>
          <div class="mb-3"><label class="form-label">Password</label><input type="password" id="password" class="form-control" required></div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="add-receptionist-form" class="btn btn-primary">Save Receptionist</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../js/layout-loader.js"></script>
<script>
  const token = localStorage.getItem('authToken');

  function loadReceptionists() {
    fetch('http://localhost:8080/api/receptionists', { headers: { 'Authorization': 'Bearer ' + token } })
            .then(response => response.json())
            .then(receptionists => {
              const tableBody = document.getElementById('receptionist-table-body');
              tableBody.innerHTML = '';
              receptionists.forEach(rec => {
                tableBody.innerHTML += `
                        <tr>
                            <td>${rec.fullName}</td>
                            <td>${rec.username}</td>
                            <td><span class="badge bg-info">${rec.role}</span></td>
                        </tr>
                    `;
              });
            });
  }

  document.getElementById('add-receptionist-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const receptionistData = {
      fullName: document.getElementById('fullName').value,
      username: document.getElementById('username').value,
      password: document.getElementById('password').value,
    };

    fetch('http://localhost:8080/api/receptionists', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
      body: JSON.stringify(receptionistData)
    }).then(response => {
      if (response.ok) {
        alert('Receptionist added successfully!');
        location.reload();
      } else {
        alert('Error adding receptionist.');
      }
    });
  });

  document.addEventListener('DOMContentLoaded', loadReceptionists);
</script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org"-->
<!--      th:replace="~{branch-layout :: layout(~{::title}, ~{::.content-wrapper})}">-->
<!--<head>-->
<!--  <title>Manage Receptionists</title>-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->

<!--</head>-->
<!--<body>-->
<!--<div class="content-wrapper">-->
<!--  <div class="container-fluid">-->
<!--    <h1 class="mt-4" th:text="'Manage Receptionists for ' + ${currentBranchName}">Manage Receptionists</h1>-->
<!--    <p class="text-muted">Add new receptionists for your branch.</p>-->
<!--    <hr>-->

<!--    <div class="card mb-4 shadow-sm">-->
<!--      <div class="card-header">-->
<!--        <i class="bi bi-person-plus-fill"></i>-->
<!--        Add a New Receptionist-->
<!--      </div>-->
<!--      <div class="card-body">-->
<!--        <form th:action="@{/branch/receptionists/add}" th:object="${newReceptionist}" method="post">-->
<!--          <div class="row">-->
<!--            <div class="col-md-4 mb-3">-->
<!--              <label for="fullName" class="form-label">Full Name</label>-->
<!--              <input type="text" class="form-control" id="fullName" th:field="*{fullName}" required>-->
<!--            </div>-->
<!--            <div class="col-md-4 mb-3">-->
<!--              <label for="username" class="form-label">Username (for Login)</label>-->
<!--              <input type="text" class="form-control" id="username" th:field="*{username}" required>-->
<!--            </div>-->
<!--            <div class="col-md-4 mb-3">-->
<!--              <label for="password" class="form-label">Temporary Password</label>-->
<!--              <input type="password" class="form-control" id="password" name="password" required>-->
<!--            </div>-->
<!--          </div>-->
<!--          <button type="submit" class="btn btn-success">-->
<!--            <i class="bi bi-check-circle"></i> Add Receptionist-->
<!--          </button>-->
<!--        </form>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="card shadow-sm">-->
<!--      <div class="card-header">-->
<!--        <i class="bi bi-table"></i>-->
<!--        Current Receptionist List-->
<!--      </div>-->
<!--      <div class="card-body">-->
<!--        <table class="table table-hover">-->
<!--          <thead class="table-light">-->
<!--          <tr>-->
<!--            <th>Receptionist Name</th>-->
<!--            <th>Username</th>-->
<!--            <th>Actions</th>-->
<!--          </tr>-->
<!--          </thead>-->
<!--          <tbody>-->
<!--          <tr th:each="rec : ${receptionistList}">-->
<!--            <td th:text="${rec.fullName}">Sunethra Perera</td>-->
<!--            <td th:text="${rec.username}">sunethra.p</td>-->
<!--            <td>-->
<!--              <a href="#" class="btn btn-sm btn-outline-primary">Edit</a>-->
<!--              <a href="#" class="btn btn-sm btn-outline-danger">Remove</a>-->
<!--            </td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <td>Kasun Jayasuriya</td>-->
<!--            <td>kasun.j</td>-->
<!--            <td>-->
<!--              <a href="#" class="btn btn-sm btn-outline-primary">Edit</a>-->
<!--              <a href="#" class="btn btn-sm btn-outline-danger">Remove</a>-->
<!--            </td>-->
<!--          </tr>-->
<!--          </tbody>-->
<!--        </table>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->