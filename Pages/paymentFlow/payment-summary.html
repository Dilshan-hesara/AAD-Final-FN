<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::title}, ~{::.content-wrapper})}">
<head>
  <title>Appointment Payment</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
<div class="content-wrapper">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow-lg mt-4">
          <div class="card-header bg-primary text-white text-center">
            <h3><i class="bi bi-wallet2"></i> Appointment Payment Summary</h3>
          </div>
          <div class="card-body p-4">
            <p class="text-center text-muted">Please review your appointment details before proceeding to payment.</p>

            <div class="list-group mb-4">
              <div class="list-group-item">
                <strong>Appointment ID:</strong>
                <span class="float-end" th:text="${appointment.id}">#APP1025</span>
              </div>
              <div class="list-group-item">
                <strong>Doctor:</strong>
                <span class="float-end" th:text="${appointment.doctor.firstName} + ' ' + ${appointment.doctor.lastName}">Dr. Kamal Perera</span>
              </div>
              <div class="list-group-item">
                <strong>Date & Time:</strong>
                <span class="float-end" th:text="${#temporals.format(appointment.appointmentDate, 'yyyy-MM-dd HH:mm')}">2025-07-20 10:00 AM</span>
              </div>
              <div class="list-group-item">
                <strong>Branch:</strong>
                <span class="float-end" th:text="${appointment.branch.name}">Colombo Main</span>
              </div>
            </div>

            <div class="text-center bg-light p-3 rounded mb-4">
              <h2>Total Amount to Pay</h2>
              <h1 class="display-4 fw-bold text-success" th:text="'LKR ' + ${appointment.fee}">LKR 2500.00</h1>
            </div>

            <div class="d-grid">
              <button type="button" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#cardPaymentModal">
                <i class="bi bi-credit-card-fill"></i> Pay Now
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="cardPaymentModal" tabindex="-1" aria-labelledby="cardPaymentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cardPaymentModalLabel">Enter Card Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form th:action="@{/payment/confirm}" method="post">
          <input type="hidden" name="appointmentId" th:value="${appointment.id}" />

          <div class="mb-3">
            <label for="cardNumber" class="form-label">Card Number</label>
            <input type="text" class="form-control" id="cardNumber" placeholder="xxxx xxxx xxxx xxxx" required>
          </div>
          <div class="row">
            <div class="col-md-7 mb-3">
              <label for="expiryDate" class="form-label">Expiry Date</label>
              <input type="text" class="form-control" id="expiryDate" placeholder="MM/YY" required>
            </div>
            <div class="col-md-5 mb-3">
              <label for="cvc" class="form-label">CVC</label>
              <input type="text" class="form-control" id="cvc" placeholder="xxx" required>
            </div>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-primary">Confirm Payment</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</body>
</html>