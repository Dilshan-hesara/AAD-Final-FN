
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add New Branch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/auth.js" defer></script>
</head>
<body>
<div id="sidebar-placeholder"></div>

<div class="content">
    <h1>Add New Branch</h1>
    <hr>
    <div class="card">
        <div class="card-body">
            <form id="add-branch-form">
                <div class="mb-3"><label class="form-label">Branch Name</label><input type="text" id="branchName" class="form-control" required></div>
                <div class="mb-3"><label class="form-label">Location</label><input type="text" id="branchLocation" class="form-control" required></div>
                <div class="mb-3"><label class="form-label">Contact Number</label><input type="tel" id="branchContact" class="form-control" required></div>
                <div class="mb-3"><label class="form-label">Email</label><input type="email" id="branchEmail" class="form-control" required></div>
                <button type="submit" class="btn btn-primary">Register Branch</button>
                <a href="manage-all-branches.html" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
    </div>
</div>

<script src="js/layout-loader.js"></script>
<script>
    document.getElementById('add-branch-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const token = localStorage.getItem('authToken');
        const branchData = {
            name: document.getElementById('branchName').value,
            location: document.getElementById('branchLocation').value,
            contactNumber: document.getElementById('branchContact').value,
            email: document.getElementById('branchEmail').value
        };
        fetch('http://localhost:8080/api/super/branch', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
            body: JSON.stringify(branchData)
        }).then(response => {
            if (response.ok) {
                alert('Branch added successfully!');
                window.location.href = 'manage-branch-details.html';
            } else { alert('Error adding branch.'); }
        });
    });
</script>
</body>
</html>
